Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 48
Rules claiming more threads will be scaled down.
Job stats:
job                 count
----------------  -------
Sparta_collapse         1
Sparta_endtime          1
Sparta_starttime        1
all                     1
endCutShuffle_sh        1
total                   5

Select jobs to execute...

[Wed Dec 13 02:51:05 2023]
checkpoint endCutShuffle_sh:
    input: /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/setupSpartaDone.txt
    output: /share/quonlab/workspaces/tmathieu/meyersData/shuffleDirSparta_1, /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutShuffleSpartaDone.txt
    jobid: 3
    reason: Missing output files: /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutShuffleSpartaDone.txt; Code has changed since last execution; Params have changed since last execution
    threads: 48
    resources: tmpdir=/tmp
DAG of jobs will be updated after completion.


		export st=`date +%s`
		mkdir -p /share/quonlab/workspaces/tmathieu/meyersData/shuffleDirSparta_1
		python3 /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPARE/EndCut.pipeline/scripts/sRNA_shuffler.py /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPARE/EndCut.pipeline/resources/sRNAs/anno.mir.tas.fa 2 /share/quonlab/workspaces/tmathieu/meyersData/shuffleDirSparta_1 /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutShuffleSpartaDone.txt
		
		#removing integers from file names
		bash removeIntegers.sh /share/quonlab/workspaces/tmathieu/meyersData/shuffleDirSparta_1 /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1

		export et=`date +%s`
		export rt=$et-$st
		echo "//////////ENDCUT_SHUFFLE_DONE ($rt s)" >> /share/quonlab/workspaces/tmathieu/meyersData/runtimesparta_1.log
		echo DONE > /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutShuffleSpartaDone.txt
		
[Wed Dec 13 02:51:06 2023]
Finished job 3.
1 of 5 steps (20%) done
Select jobs to execute...

[Wed Dec 13 02:51:06 2023]
rule Sparta_starttime:
    input: /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutShuffleSpartaDone.txt, /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endMaskSpartaDone.txt
    output: /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutSpartaStartTimeDone.txt
    jobid: 4
    reason: Missing output files: /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutSpartaStartTimeDone.txt
    resources: tmpdir=/tmp


		export st=`date +%s`
		echo "//////////ENDCUT_SPARTA_START_TIME_DONE ($st s)" >> /share/quonlab/workspaces/tmathieu/meyersData/runtimesparta_1.log
		echo DONE > /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutSpartaStartTimeDone.txt
		
[Wed Dec 13 02:51:06 2023]
Finished job 4.
2 of 7 steps (29%) done
Select jobs to execute...

[Wed Dec 13 02:51:06 2023]
rule endCutSparta_sh:
    input: /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutShuffleSpartaDone.txt, /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutSpartaStartTimeDone.txt, /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endMaskSpartaDone.txt, /share/quonlab/workspaces/tmathieu/meyersData/shuffleDirSparta_1/anno.mir.tas.zero_.shuffled.fa
    output: /share/quonlab/workspaces/tmathieu/meyersData/transcript_bedgraph_capmasked_sparta1/anno.mir.tas.zero_.shuffled.pred.sites.bed
    jobid: 12
    reason: Missing output files: /share/quonlab/workspaces/tmathieu/meyersData/transcript_bedgraph_capmasked_sparta1/anno.mir.tas.zero_.shuffled.pred.sites.bed; Input files updated by another job: /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutSpartaStartTimeDone.txt
    wildcards: miRShuffled=anno.mir.tas.zero_.shuffled
    threads: 48
    resources: tmpdir=/tmp


		#execution of miRferno from the sPARTA program
		python3 /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/sPARTA/sPARTA.py -genomeFile /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPARE/resources/genome.fasta -annoType GFF -annoFile /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPARE/resources/annotation.gff -genomeFeature 0 -miRNAFile /share/quonlab/workspaces/tmathieu/meyersData/shuffleDirSparta_1/anno.mir.tas.zero_.shuffled.fa -tarPred H -tarScore S --map2DD

		awk 'NR > 1' predicted/All.targs.parsed.csv | awk -F "," '{print $2,$3,$1,$6}' | awk -F " " '{split($2,a,"-"); print $1,a[1],a[2],$3,$4}' | sort -k1,1 -k2,2n | awk -F ' ' -v OFS="	" '{split($4,a,"_shuffled"); print $1,$2,$3,a[1],$5}' > /share/quonlab/workspaces/tmathieu/meyersData/transcript_bedgraph_capmasked_sparta1/anno.mir.tas.zero_.shuffled.pred.sites.bed

		
[Wed Dec 13 02:51:13 2023]
Finished job 12.
3 of 7 steps (43%) done
Select jobs to execute...

[Wed Dec 13 02:51:13 2023]
rule endCutSparta_sh:
    input: /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutShuffleSpartaDone.txt, /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutSpartaStartTimeDone.txt, /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endMaskSpartaDone.txt, /share/quonlab/workspaces/tmathieu/meyersData/shuffleDirSparta_1/anno.mir.tas.one_.shuffled.fa
    output: /share/quonlab/workspaces/tmathieu/meyersData/transcript_bedgraph_capmasked_sparta1/anno.mir.tas.one_.shuffled.pred.sites.bed
    jobid: 13
    reason: Missing output files: /share/quonlab/workspaces/tmathieu/meyersData/transcript_bedgraph_capmasked_sparta1/anno.mir.tas.one_.shuffled.pred.sites.bed; Input files updated by another job: /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutSpartaStartTimeDone.txt
    wildcards: miRShuffled=anno.mir.tas.one_.shuffled
    threads: 48
    resources: tmpdir=/tmp


		#execution of miRferno from the sPARTA program
		python3 /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/sPARTA/sPARTA.py -genomeFile /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPARE/resources/genome.fasta -annoType GFF -annoFile /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPARE/resources/annotation.gff -genomeFeature 0 -miRNAFile /share/quonlab/workspaces/tmathieu/meyersData/shuffleDirSparta_1/anno.mir.tas.one_.shuffled.fa -tarPred H -tarScore S --map2DD

		awk 'NR > 1' predicted/All.targs.parsed.csv | awk -F "," '{print $2,$3,$1,$6}' | awk -F " " '{split($2,a,"-"); print $1,a[1],a[2],$3,$4}' | sort -k1,1 -k2,2n | awk -F ' ' -v OFS="	" '{split($4,a,"_shuffled"); print $1,$2,$3,a[1],$5}' > /share/quonlab/workspaces/tmathieu/meyersData/transcript_bedgraph_capmasked_sparta1/anno.mir.tas.one_.shuffled.pred.sites.bed

		
[Wed Dec 13 02:51:19 2023]
Finished job 13.
4 of 7 steps (57%) done
Select jobs to execute...

[Wed Dec 13 02:51:19 2023]
rule Sparta_collapse:
    input: /share/quonlab/workspaces/tmathieu/meyersData/transcript_bedgraph_capmasked_sparta1/anno.mir.tas.zero_.shuffled.pred.sites.bed, /share/quonlab/workspaces/tmathieu/meyersData/transcript_bedgraph_capmasked_sparta1/anno.mir.tas.one_.shuffled.pred.sites.bed, /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutSpartaStartTimeDone.txt
    output: /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutSpartaCollapseDone.txt
    jobid: 2
    reason: Missing output files: /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutSpartaCollapseDone.txt; Input files updated by another job: /share/quonlab/workspaces/tmathieu/meyersData/transcript_bedgraph_capmasked_sparta1/anno.mir.tas.zero_.shuffled.pred.sites.bed, /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutSpartaStartTimeDone.txt, /share/quonlab/workspaces/tmathieu/meyersData/transcript_bedgraph_capmasked_sparta1/anno.mir.tas.one_.shuffled.pred.sites.bed; Set of input files has changed since last execution
    resources: tmpdir=/tmp


		echo DONE > /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutSpartaCollapseDone.txt
		
[Wed Dec 13 02:51:19 2023]
Finished job 2.
5 of 7 steps (71%) done
Select jobs to execute...

[Wed Dec 13 02:51:19 2023]
rule Sparta_endtime:
    input: /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutSpartaCollapseDone.txt
    output: /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutSpartaDone.txt
    jobid: 1
    reason: Missing output files: /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutSpartaDone.txt; Input files updated by another job: /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutSpartaCollapseDone.txt
    resources: tmpdir=/tmp


		export et=`date +%s`
		echo "//////////ENDCUT_SPARTA_END_TIME_DONE ($et s)" >> /share/quonlab/workspaces/tmathieu/meyersData/runtimesparta_1.log
		echo 'nanoPARE_sPARTA complete!'
		echo DONE > /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutSpartaDone.txt
		
[Wed Dec 13 02:51:19 2023]
Finished job 1.
6 of 7 steps (86%) done
Select jobs to execute...

[Wed Dec 13 02:51:19 2023]
localrule all:
    input: /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutSpartaDone.txt
    jobid: 0
    reason: Input files updated by another job: /share/quonlab/workspaces/tmathieu/meyers/nanoPAREUpdate/nanoPareVT1/endCutSpartaDone.txt
    resources: tmpdir=/tmp

[Wed Dec 13 02:51:19 2023]
Finished job 0.
7 of 7 steps (100%) done
Complete log: .snakemake/log/2023-12-13T025103.587059.snakemake.log
